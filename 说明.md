# Fabry-Pérot腔OAM模式分析软件功能需求文档

---

## 1. 目的
开发一款基于Python的Fabry-Pérot（FP）腔仿真工具，用于分析不同轨道角动量（OAM）模式的透射特性，包含以下核心功能：  
- **参数交互**​：实时调整腔参数（波长、腔长、反射率）  
- **物理量计算**​：FSR、精细度、基模束腰、模式间距、线宽  
- **模式容量评估**​：计算可分辨的OAM模式数  
- **可视化**​：绘制透射率随波长变化的曲线  

---

## 2. 功能需求

### 2.1 用户界面（UI）
#### (1) 主界面布局
| ​**组件**​         | ​**说明**​                                                                 |
|------------------|--------------------------------------------------------------------------|
| 参数输入面板      | 位于界面左侧，包含可编辑的输入字段和默认值                              |
| 图形显示区域      | 位于界面右侧，显示透射率曲线和计算结果                                  |
| 控制按钮          | "计算"、"重置"、"导出数据" 按钮                                         |

#### (2) 输入参数（默认值）
| **参数**​         | **符号**​ | **默认值**​ | **单位**​ | **允许范围**​       |
|------------------|----------|------------|----------|--------------------|
| 入射光波长        | λ        | 795        | nm       | 400–2000 nm       |
| 腔长             | L        | 10         | mm       | 0.1–100 mm        |
| 镜面反射率（左）  | R1    | 0.9        | -        | 0 ≤ R1 < 1     |
| 镜面反射率（右）  | R2    | 0.9        | -        | 0 ≤ R2< 1     |
| 曲率半径 (左) | Ra1 | 10 | mm | 0.1–100 mm |
| 曲率半径 (右) | Ra2 | 10 | mm | 0.1–100 mm |
|  |  |  |  |  |

### 2.2 核心计算功能
#### (1) 物理量计算

| **物理量**​        | **公式**​                                                                 | **输出格式**​          |
|-------------------|-------------------------------------------------------------------------|-----------------------|
| 自由光谱范围（FSR）| $ \text{FSR} = \frac{c}{2nL} $（空气中 $ n=1 $）                     | 数值（GHz）+ 公式显示 |
| 精细度（Finesse） | $ \mathcal{F} = \frac{\pi \sqrt{Ra_1 Ra_2}}{1 - Ra_1 Ra_2} $          | 数值（无单位）       |
| 基模束腰半径      | $$ w_{0}^{2} = \frac{L\lambda}{\pi} = \sqrt{\frac{g_{1}g_{2}(1 - g_{1}g_{2})}{(g_{1} + g_{2} - 2g_{1}g_{2})^{2}}} $$ | 数值（μm）           |
| 模式间距（Δν）    | $ \Delta u = \frac{\text{FSR}}{\mathcal{F}} $                          | 数值（GHz）           |
| 线宽（Δλ）        | $ \Delta \lambda = \frac{\lambda^2}{c} \cdot \Delta u $               | 数值（nm）            |

#### (2) 模式容量评估
- **条件**​：计算可分辨的OAM模式数 $ N $ 你想想怎么计算 N   
- **输出**​：最大支持模式数（整数） + 理论依据说明  

#### (3) 透射率计算
- **公式**​：  
  $$
  T = \frac{I_t}{I_0} 
  = \frac{|A_t|^2}{|A_e|^2} 
  = \frac{t_1^2 t_2^2}{(1 - r_1 r_2)^2 + 4r_1 r_2 \sin^2 \frac{\delta}{2}} 
  = \frac{T_1 T_2}{(1 - \sqrt{R_1 R_2})^2 + 4\sqrt{R_1 R_2} \sin^2 \frac{\delta}{2}}
  $$
  - $ T_1 = 1 - R_1 $, $ T_2 = 1 - R_2 $  
  - $\delta = \frac{4\pi}{\lambda}nL_{cav} + 2(2p + |l| + 1)\phi $, $ \phi = \arccos(±\sqrt{g_1 g_2}) $其中符号的选择取决于谐振腔在稳定图的位置,当谐振腔位于稳定图的右  上角,则取“+”号,若位于左下位置则取“-”号。  

### 2.3 可视化要求

绘制不同OAM模式在设计的腔参数下的透射率曲线图(纵坐标为T)横坐标为(L)

| **图表**​   | **要求**​                                                     |
| ---------- | ------------------------------------------------------------ |
| 透射率曲线 | 在固定p默认p=0下不同OAM模式（$ l = 0, 1, 2, ..., N_{\text{max}} $）的 $ T(\lambda) $ 曲线 |
| 标注       | 标出FSR、线宽、模式间距的数值和位置                          |
| 动态更新   | 参数修改后实时刷新图表                                       |

---

## 3. 输入输出规范
### 3.1 输入验证
| **参数**​                    | **合法性检查**​                               |
| --------------------------- | -------------------------------------------- |
| 波长（λ）                   | 400 nm ≤ λ ≤ 2000 nm，否则弹出错误提示       |
| 腔长（L）                   | L > 0，否则提示"腔长必须为正数"              |
| 两个镜子的反射率（R1, R2）  | 0 ≤ R < 1，否则提示"反射率必须在[0,1)范围内" |
| 两个镜子的曲率半径(Ra1,Ra2) | 你补充一下                                   |
|                             |                                              |

### 3.2 输出格式

| ​**结果**​         | ​**格式**​                                                              |
|------------------|-----------------------------------------------------------------------|
| 物理量数值        | 保留4位有效数字（例如：FSR = 15.23 GHz）                             |
| 透射率曲线        | 矢量图（PDF/SVG） + PNG位图，支持缩放和坐标轴标签自定义               |
| 数据导出          | CSV格式，包含波长、各OAM模式透射率、计算参数                          |

---

## 4. 技术约束
| ​**项目**​          | ​**要求**​                                                                 |
|-------------------|--------------------------------------------------------------------------|
| 编程语言          | Python 3.13                                                            |
| 依赖库            | NumPy, Matplotlib, PyQt（界面）, Pandas（数据导出）                     |
| 计算速度          | 参数修改后图表刷新时间 < 1秒（1000波长点）                             |
| 代码可读性        | 模块化设计，关键公式注释，符合PEP8规范                                 |



---

## 6. 交付物
1. **可执行程序**​：GUI应用程序（.exe或.py）  
2. **源代码**​：模块化Python脚本（含注释）  
3. **文档**​：用户手册（操作指南+公式推导）  
4. **测试报告**​：验证所有功能符合需求  

---